<!--  AGREGAR *ngIf="showHeader" -->
<header class="header" *ngIf="showHeader">
  <div class="logo-container">
    <img class="logo-u" src="assets/images/main-logo.svg" alt="Logo HapticTool" />
    <div class="divider"></div>
    <div class="logo"> HapticTool</div>
  </div>

  <!--  Header normal -->
  <ng-container *ngIf="!isAdminView(); else adminHeader">
    <nav class="nav">
      <!-- Todos los roles (incluido el no logueado) pueden ver Sobre Nosotros -->
      <p-button label="Sobre Nosotros" (onClick)="goTo('/')" [ngClass]="{ 'active': isActive('/') }"></p-button>
      
      <!--  Gr谩ficas solo para usuarios logueados -->
      <p-button 
        *ngIf="user"
        label="Gr谩ficas" 
        (onClick)="goTo('/graficas')"    
        [ngClass]="{ 'active': isActive('/graficas') }">
      </p-button>

      <!--  Cargar archivos solo para investigador (2) o superadmin (3) -->
      <p-button 
        *ngIf="isResearcher() || isSuperAdmin()"
        label="Cargar Archivos" 
        (onClick)="goTo('/cargar-archivos')"  
        [ngClass]="{ 'active': isActive('/cargar-archivos') }">
      </p-button>
    </nav>

    <div class="actions">
      <ng-container *ngIf="user; else guest">
        <span class="welcome">Bienvenido, {{ user.nombre }}</span>

        <!--  Solo para SuperAdministrador -->
        <button 
          *ngIf="isSuperAdmin()" 
          class="icon-btn" 
          (click)="goTo('/administrador')" 
          title="Panel de administraci贸n">
          <i class="pi pi-id-card"></i>
        </button>

        <!-- 锔 Ajustes -->

        <!--  Cerrar sesi贸n -->
        <button class="icon-btn" (click)="logout()" title="Cerrar sesi贸n">
          <i class="pi pi-sign-out"></i>
        </button>
      </ng-container>

      <!-- Si no hay sesi贸n -->
      <ng-template #guest>
        <p-button
          label="Iniciar Sesi贸n"
          styleClass="p-button-outlined"
          (onClick)="goTo('/Inicio-sesi贸n')">
        </p-button>
      </ng-template>
    </div>   
  </ng-container>

  <!--  Header del SuperAdministrador -->
  <ng-template #adminHeader>
    <nav class="nav admin-nav">
      <p-button label="Usuarios" (onClick)="goTo('/administrador/usuarios')"></p-button>
      <p-button label="Archivos" (onClick)="goTo('/administrador/archivos')"></p-button>
      <p-button label="Logs" (onClick)="goTo('/administrador/logs')"></p-button>
    </nav>

    <div class="actions">
      <span class="welcome">Bienvenido: {{ user?.nombre }}</span>
        <button class="icon-btn" (click)="goTo('')" title="volver a inicio">
          <i class="pi pi-chevron-circle-left"></i>
        </button>
      <button class="icon-btn" (click)="logout()" title="Cerrar sesi贸n">
        <i class="pi pi-sign-out"></i>
      </button>
    </div>
  </ng-template>
</header>